!function(){"use strict";function e(n){return function(e){return t=typeof(e=e),(null===e?"null":"object"==t&&Array.isArray(e)?"array":"object"==t&&r(e,String,function(e,t){return Object.prototype.isPrototypeOf.call(t,e)})?"string":t)===n;var t}}var r=function(e,t,n){return!!n(e,t.prototype)||(null==(n=e.constructor)?void 0:n.name)===t.name},u=function(e){return null==e},s=e("object"),c=e("string");tinymce.PluginManager.add("link_yform",function(l){l.options.register("link_yform_tables",{processor:"object",default:{title:"YForm",items:[]}});for(var e=l.options.get("link_yform_tables"),t=e.title,r=e.items,o=[],n=0,i=r.length;n<i;++n)!function(e){var t=r[e],n=[];if(s(t)||n.push("Entry is not an object."),u(t.table)&&n.push('Key "table" with table name as value is missing.'),u(t.field)&&n.push('Key "field" with field name as value is missing.'),0<n.length)return console.warn("TinyMCE Plugin link-yform reports for entry "+(e+1)+": \n- "+n.join("\n- "));e=u(t.title)?t.table:t.title;o.push({type:"menuitem",text:e,onAction:function(){return a(t)}})}(n);var a=function(r){try{var o=l.dom,i=newPoolWindow("index.php?page=yform/manager/data_edit&table_name="+r.table+"&rex_yform_manager_opener[id]=1&rex_yform_manager_opener[field]="+r.field+"&rex_yform_manager_opener[multiple]=0");$(i).on("rex:YForm_selectData",function(e,t,n){e.preventDefault(),i.close(),n=l.selection.getContent()?l.selection.getContent():n.replace(new RegExp("(.*?)\\s\\[.*?\\]","gi"),"$1");e={href:(!u(r.url)&&c(r.url)?r.url:r.table.split("_").join("-")+"://")+t,title:n};l.insertContent(o.createHTML("a",e,o.encode(n)))})}catch(e){console.log(e)}};l.ui.registry.addMenuButton("link_yform",{text:t,fetch:function(e){e(o)}})})}();